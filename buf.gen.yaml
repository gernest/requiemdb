version: v1
managed:
  enabled: true
  go_package_prefix:
    default: github.com/requiemdb/requiemdb/gen/go
    except:
      - buf.build/opentelemetry/opentelemetry
      - buf.build/googleapis/googleapis
      - buf.build/bufbuild/protovalidate
plugins:
  - plugin: go
    out: gen/go
    opt: paths=source_relative

  - plugin: go-grpc
    out: gen/go
    opt:
      - paths=source_relative

  - plugin: grpc-gateway
    out: gen/go
    opt:
      - paths=source_relative
      - generate_unbound_methods=true

  # - plugin: buf.build/community/timostamm-protobuf-ts:v2.9.1
  #   out: packages/rq/src/proto
  #   opt:
  #     - generate_dependencies
  #     - optimize_code_size
  #     - long_type_number

  - plugin: buf.build/community/timostamm-protobuf-ts:v2.9.1
    out: ui/src/rq/proto
    opt:
      - generate_dependencies
